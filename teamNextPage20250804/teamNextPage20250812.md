# 📝 일일 회고록 (Daily Retrospective)
- 날짜: 2025-08-12 (화)
- 프로젝트: BookJuk – 모임방 소통 게시판

---

## 1) 오늘의 목표 & 결과
- **목표:** 모임방 내부 소통 게시판의 **데이터 레이어(엔티티/레포지토리)** 설계 및 기본 구현
- **결과:** 게시판/댓글 엔티티 및 레포지토리 추가, 참여자 체크용 레포지토리 추가, 관련 부가 변경사항 반영 완료

---

## 2) 수행 내용 (What I did)
### 2-1. 데이터 레이어 설계·구현
- **엔티티/레포지토리 추가**
  - `Post`, `Comment` 엔티티 및 각 레포지토리 추가
  - 양방향 연관관계 순환 참조 주의하여 기본 필드/관계 정의
- **참여자 체크용 레포지토리**
  - `MeetingParticipantRepository.java` 추가
  - 모임 내 사용자 권한/상태 확인을 위한 조회 메서드 설계(예: `meetingId`, `userId` 기반 존재/권한 확인)

### 2-2. 기타 변경사항
- **Gradle – QueryDSL 추가**
  - 추후 동적 검색/정렬 등을 대비한 기반 설정 추가
- **.gitignore 정리**
  - `yml` 파일 제외(=버전관리 포함) – *실무에서는 비권장, 학습/프로젝트 용도로만 적용*
- **엔티티 보완**
  - `MeetingReview` 엔티티: `@ToString(exclude = {"meeting", "reviewer", "reviewee"})` 오타 수정  
    → 양방향 연관관계에서 순환 출력 방지
  - `User` 엔티티: `@Builder` 위치 조정(클래스 하단 정리)  
    → 가독성·생성자/필드 구성 명확화

---

## 3) PR 리뷰 & 협업
- 팀원들과 **PR 동시 리뷰** 진행
  - 엔티티 연관관계, 레포지토리 파생쿼리 네이밍, 트랜잭션 경계에 대한 피드백 교환
  - 리뷰 코멘트를 반영하여 네이밍/주석/패키지 구조 소폭 정리
- **충돌(merge conflict) 재현 및 해결**
  - 브랜치 최신화 → 충돌 파일 식별 → 의존 임포트/엔티티 이동 경로 정리 → 빌드/런 확인
  - 충돌 해결 후 **리뷰 다시 요청 → 머지** 플로우 검증

---

## 4) 이슈 & 해결 (Problem → Fix)
1. **양방향 연관관계 `toString()` 순환 문제 가능성**
   - *Fix:* `@ToString(exclude = {...})` 적용 및 연관관계 편의 메서드 사용 가이드 주석 추가
2. **참여자 권한 체크 위치 모호**
   - *Fix:* `MeetingParticipantRepository`에서 확인 메서드 제공(서비스 레이어에서 명확히 호출하도록 책임 분리)
3. **환경설정 파일 버전관리 여부**
   - *Fix:* 학습/프로젝트 특성상 `yml` 버전관리 포함. 단, **실무 전환 시 보안 정책에 따라 즉시 분리 필요**(Secret 관리 체계 도입)

---

## 5) 배운 점 (Learned)
- JPA **양방향 연관관계**에서 `@ToString`/로그 출력은 순환 참조를 유발할 수 있으므로 **명시적 exclude**가 안전.
- 레포지토리의 **파생 쿼리 네이밍**은 도메인 용어와 일치시켜야 서비스/컨트롤러에서 의도가 바로 읽힘.
- 팀 PR 리뷰 시 **충돌 재현 → 해결 → 재검증** 루틴을 짧게 돌리는 것이 전체 일정 리스크를 줄임.

---

## 6) 내일 할 일 (Next)
- **서비스 레이어**: 게시글/댓글 생성·조회 로직 + **참여자(승인/역할) 검증** 로직 연결
- **API 스펙 반영**: 컨트롤러 엔드포인트 초안 구현 및 예외 응답 표준화(`ApiResponse`, `ErrorResponse`)
- **테스트**: `@SpringBootTest`/슬라이스 테스트로 레포지토리·서비스 기본 시나리오 TDD 진행
  - 게시글 작성권한(모임 참여자/상태), 댓글 작성권한, 비참여자의 접근 차단 케이스

---

## 7) 리스크 & 대응
- **환경설정 노출 위험(yml 커밋)**
  - 대응: 저장소 공개 범위 재확인, 민감 키는 별도 값 사용/Secret 관리로 전환 계획 수립
- **FK 제약 미사용 시 데이터 정합성**
  - 대응: 서비스 레이어에서 **존재/중복/상태 검증**을 트랜잭션 내 선행, 인덱스 기반 조회로 성능 보조

---

## 8) 산출물/변경 목록 (Artifacts)
- 엔티티/레포지토리: `Post`, `Comment`, `MeetingParticipantRepository.java`
- 설정: Gradle(QueryDSL), `.gitignore` 정리
- 엔티티 보완: `MeetingReview @ToString` 수정, `User @Builder` 위치 조정
- 협업: PR 리뷰 기록, 충돌 해결 커밋

---

## 9) 한 줄 소감
- 데이터 레이어 뼈대를 세우고, 권한 체크 기준을 명확히 하면서 **이후 서비스/컨트롤러 확장**의 기반을 다졌다.
